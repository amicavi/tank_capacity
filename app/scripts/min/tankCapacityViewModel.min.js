function tankCapacityViewModel(){function e(){console.log(r.selectedBrand()+", "+r.selectedModel()),r.vehicle(r.selectedBrand()+", "+r.selectedModel())}function n(e){5==e?(r.selectedBrand(null),r.selectedModel(null),r.selectedEngine(null),r.vehicle(null),r.tankCapacity(null)):4==e?(r.selectedModel(null),r.selectedEngine(null),r.vehicle(null),r.tankCapacity(null)):(r.selectedEngine(null),r.vehicle(null),r.tankCapacity(null))}function l(){var e=r.selectedYear();requestManager().getCarMakes(e,function(e){r.brands(e)})}function s(){var e=r.selectedYear(),n=r.selectedBrand();requestManager().getCarModels(e,n,function(e){r.models(e)})}function t(){var e=r.selectedYear(),n=r.selectedModel(),l=r.selectedBrand();requestManager().getCarEngines(e,n,l,function(e){a(e)})}function a(e){var n=[];e.forEach(function(e){e.cylinders&&e.liters?n.push(e.cylinders+" cilindros "+e.liters+" litros"):e.cylinders?n.push(e.cylinders+" cilindros"):n.push(e.liters+" litros")}),console.log(n),r.engines(n)}function c(e){var n=r.selectedYear(),l=r.selectedModel(),s=r.selectedBrand();requestManager().getCarTankCapacity(n,l,s,e,function(e){console.log(e),"error"==e?r.tankCapacity("No se encontró información de este vehículo"):r.tankCapacity(e.capacity+" lts.")})}var r=this;this.years=ko.observableArray([]),this.brands=ko.observableArray([]),this.models=ko.observableArray([]),this.engines=ko.observableArray([]),this.tankCapacity=ko.observable(),this.vehicle=ko.observable(),this.selectedYear=ko.observable(),this.selectedBrand=ko.observable(),this.selectedModel=ko.observable(),this.selectedEngine=ko.observable(),r.selectedYear.subscribe(function(e){e?l():n(5)}),r.selectedBrand.subscribe(function(e){e?s():n(4)}),r.selectedModel.subscribe(function(e){e?t():n(3)}),r.selectedEngine.subscribe(function(n){console.log("selectedEngine",n),n&&(c(n.replace(" cilindros ","+").replace(" litros","")),e())}),requestManager().getCarYears(function(e){r.years(e)})}var view=new tankCapacityViewModel;$(function(){ko.applyBindings(view)});